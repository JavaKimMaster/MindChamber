version: '3.8'  # ğŸ”§ Docker Compose ë²„ì „ (ê¶Œì¥ ìµœì‹  ë²„ì „)

services:  # ğŸ“¦ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ(ì„œë¹„ìŠ¤)ë¥¼ ì •ì˜í•˜ëŠ” ë¸”ë¡

  zookeeper:  # ğŸ§  Kafkaê°€ ì˜ì¡´í•˜ëŠ” ë¶„ì‚° coordination ì„œë¹„ìŠ¤ (Kafka í•„ìˆ˜ êµ¬ì„±ìš”ì†Œ)
    image: bitnami/zookeeper:latest  # ğŸ³ Bitnamiì—ì„œ ì œê³µí•˜ëŠ” ìµœì‹  Zookeeper ì´ë¯¸ì§€ ì‚¬ìš©
    container_name: acquilaeventx-zookeeper-1
    ports:
      - "2181:2181"  # ğŸ“¡ Zookeeper ê¸°ë³¸ í¬íŠ¸ (Kafkaì™€ ë‚´ë¶€ í†µì‹ ìš©)
    environment:
      - ALLOW_ANONYMOUS_LOGIN=yes  # ğŸ”“ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì ‘ì† í—ˆìš© (ê°œë°œìš©)

  kafka:  # ğŸ“® Kafka ë¸Œë¡œì»¤ ì„œë¹„ìŠ¤ ì •ì˜
    image: bitnami/kafka:3.5.1  # ğŸ³ Bitnami Kafka ìµœì‹  ë²„ì „ ì´ë¯¸ì§€ ì‚¬ìš©, â›³ ë²„ì „ ëª…ì‹œë„ ì¶”ì²œ
    container_name: kafka-1
    ports:
      - "9092:9092"  # ğŸ”Œ Kafka ì™¸ë¶€ ì ‘ì†ìš© í¬íŠ¸ (Spring Bootì—ì„œ ì´ í¬íŠ¸ë¡œ ì ‘ì†í•¨)
    environment:
      - KAFKA_BROKER_ID=1  # ğŸ†” ë¸Œë¡œì»¤ ID (í´ëŸ¬ìŠ¤í„°ì—ì„œ ê³ ìœ  ì‹ë³„ì)
      - KAFKA_CFG_LISTENERS=PLAINTEXT://:9092  # ğŸ”ˆ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ìˆ˜ì‹ í•  ì£¼ì†Œ
      - KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092
      # ğŸŒ ì™¸ë¶€(Spring ì•± ë“±)ì— ì•Œë¦¬ëŠ” Kafka ì£¼ì†Œ (ë¡œì»¬ í…ŒìŠ¤íŠ¸ ìš©ë„)
      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181  # ğŸ”— Zookeeperì™€ ì—°ê²° ì„¤ì •
      - ALLOW_PLAINTEXT_LISTENER=yes  # ğŸ”“ ë³´ì•ˆ ì¸ì¦ ì—†ì´ PLAINTEXT í—ˆìš© (ê°œë°œìš©)
      # - KAFKA_KRAFT_MODE_ENABLED=no  # â— KRaft ëª¨ë“œ ëª…ì‹œì ìœ¼ë¡œ ë„ê¸°
    depends_on:
      - zookeeper  # ğŸ•“ KafkaëŠ” Zookeeperê°€ ë¨¼ì € ì‹¤í–‰ëœ í›„ ì‹¤í–‰ë¨

#  redis:
#    host: localhost     # ğŸ§  Redis ì„œë²„ ì£¼ì†Œ (ë³´í†µ Dockerì— ë„ìš´ ê²½ìš° localhost)
#    port: 6379          # ğŸ”Œ Redis ê¸°ë³¸ í¬íŠ¸


  redis:
    image: redis:7.2
    container_name: acquilaeventx-redis
    ports:
      - "6379:6379"  # ë„ì»¤ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ë§¤í•‘
    restart: unless-stopped
